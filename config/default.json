{
  "startup_timeout": 10000,

  "shutdown_timeout": 5000,

  "services": {

    "queue": {
      "path": "./src/services/queue"
    },

    "events": {
      "path": "./src/services/events"
    },

    "logger": {
      "path": "./src/services/logger",
      "options": {
        "formatters": {
          "default": {
            "format": "[%(date)s] %-15.15(name)s %(levelname)s: %(message)s",
            "datefmt": "%Y-%m-%dT%H:%M:%S.%L%z",
            "colorize": false
          }
        },
        "handlers": {
          "terminal": {
            "class": "intel/handlers/console",
            "level": "VERBOSE",
            "formatter": "default"
          }
        },
        "loggers": {
          "root": {
            "level": "INFO",
            "handlers": ["terminal"],
            "handleExceptions": true,
            "exitOnError": false
          }
        }
      }
    },

    "github": {
      "path": "./src/services/github",
      "options": {
        "host": "api.github.com",
        "debug": false,
        "version": "3.0.0",
        "timeout": 5000,
        "protocol": "https",
        "headers": {
          "user-agent": "DevExp-App"
        }
      },
      "dependencies": []
    },

    "http": {
      "path": "./src/services/http",
      "options": {
        "port": "8080",
        "routes": {
          "/api": "http-route-api",
          "/github": "http-route-github",
          "/badges": "http-route-badges",
          "/jabber": "http-routes-jabber",
          "/staff": "http-routes-yandex-staff",
          "/team": "http-routes-team-dispatcher",
          "/badges-updater": "http-routes-badges-updater"
        }
      },
      "dependencies": [
        "logger",
        "http-route-api",
        "http-route-github",
        "http-route-badges",
        "http-routes-jabber",
        "http-routes-yandex-staff",
        "http-routes-team-dispatcher",
        "http-routes-badges-updater"
      ]
    },

    "#include:http-routes": "./default-http-routes.json",

    "mongoose": {
      "path": "./src/services/mongoose",
      "options": {
        "host": "mongodb://localhost/devexp"
      },
      "dependencies": ["logger"]
    },

    "model": {
      "path": "./src/services/model",
      "options": {
        "addons": {
          "pull_request": [
            "pull-request-github-addon",
            "pull-request-review-addon",
            "pull-request-complexity-addon"
          ]
        }
      },
      "dependencies": [
        "mongoose",
        "pull-request-github-addon",
        "pull-request-review-addon",
        "pull-request-complexity-addon"
      ]
    },

    "team-dispatcher": {
      "path": "./src/services/team-dispatcher",
      "options": {
        "routes": [
          { "team-devexp": ["devexp/devexp"] },
          { "team-serp-staff": ["serp/web4"] },
          { "team-lego-staff": ["lego/*"] },
          { "team-news-staff": ["news/*"] },
          { "team-serp-infraspeed": ["search-interfaces/ci"] },
          { "team-mm-staff": ["mm-interfaces/fiji"] }
        ]
      },
      "dependencies": [
        "team-devexp",
        "team-serp-staff",
        "team-lego-staff",
        "team-news-staff",
        "team-serp-infraspeed",
        "team-mm-staff"
      ]
    },

    "#include:teams": "./default-teams.json",

    "pull-request-model": {
      "path": "./src/services/pull-request-model",
      "dependencies": [
        "model"
      ]
    },

    "pull-request-github": {
      "path": "./src/services/pull-request-github",
      "options": {
        "separator": {
          "top": "\n<hr><span id=\"devexp-content-start\"></span>",
          "bottom": "<span id=\"devexp-content-end\"></span>"
        }
      },
      "dependencies": [
        "github"
      ]
    },

    "pull-request-github-addon": {
      "path": "./src/services/pull-request-github/addon"
    },

    "pull-request-review": {
      "path": "./src/services/pull-request-review",
      "options": {
        "approveCount": 2
      },
      "dependencies": [
        "events",
        "logger",
        "team-dispatcher"
      ]
    },

    "pull-request-review-addon": {
      "path": "./src/services/pull-request-review/addon"
    },

    "review": {
      "path": "./src/services/review",
      "options": {
        "steps": [
          "remove-author",
          "remove-already-reviewers",
          "ignore",
          "commiters",
          "random",
          "path-related",
          "load",
          "total-number"
        ],
        "stepOptions": {
          "commiters": {
            "max": 4,
            "since": [4, "month"],
            "ignore": ["config"],
            "filesToCheck": 5,
            "commitsCount": 10
          },
          "path-related": {
            "max": 5,
            "members": [],
            "incPattern": ["*.js"],
            "decPattern": ["*.json"]
          },
          "load": { "max": 1 },
          "random": { "max": 5 }
        }
      },
      "dependencies": [
        "logger",
        "team-dispatcher",
        "reviewer-assignment-step-commiters",
        "reviewer-assignment-step-ignore",
        "reviewer-assignment-step-ignore-lego",
        "reviewer-assignment-step-load",
        "reviewer-assignment-step-path-related",
        "reviewer-assignment-step-path-related-constructor",
        "reviewer-assignment-step-path-related-infra",
        "reviewer-assignment-step-prefered-reviewers",
        "reviewer-assignment-step-random",
        "reviewer-assignment-step-remove-already-reviewers",
        "reviewer-assignment-step-remove-author",
        "reviewer-assignment-step-responsible",
        "reviewer-assignment-step-sakhalin",
        "reviewer-assignment-step-special-reviewers"
      ]
    },

    "#include:reviewer-assignment-steps": "./default-reviewer-steps.json",

    "command": {
      "path": "./src/services/command",
      "options": {
        "events": ["github:issue_comment"],
        "#include:command-regexp": "./default-command-regexp.json"
      },
      "dependencies": [
        "queue",
        "events",
        "logger",
        "pull-request-model",
        "command-start",
        "command-stop",
        "command-ping",
        "command-ok",
        "command-not-ok",
        "command-busy",
        "command-replace",
        "command-change",
        "command-add",
        "command-remove",
        "command-help",
        "command-yandex-start"
      ]
    },

    "#include:command": "./default-command.json",

    "notification": {
      "path": "./src/services/notification",
      "dependencies": [
        "model"
      ]
    },

    "#include:notification": "./default-notification.json",

    "scheduler": {
      "path": "./src/services/scheduler",
      "options": {
        "days": 1
      },
      "dependencies": [
        "events",
        "logger",
        "pull-request-model"
      ]
    },

    "#include:badges": "./default-badges.json",

    "#include:plugins": "./default-plugins.json"

  }
}
